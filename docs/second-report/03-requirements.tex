\section{Requirements Refinement}
\label{sec:requirements}
After feedback from the initial report the original requirements have been altered and, where possible, refined as detailed below.

\subsection{Functional Requirements}
\label{sec:requirements-functional}
Below are the refinements to the existing functional requirements, based on customer feedback and the design designs made in the previous report.

\frit{1} is refined to specify how data emitters will send data to the system, and the type of data required. When creating a data emitter for the test application, we found this to be a flexible and easy-to-use architecture for gathering data. 
\frit{2} required data to be timestamped, but didn't specify how these timestamps were to be produced, \frit{2.1} and \frit{2.2} assign this
responsibility to the data emitter, and mandate when timestamps
should reflect.


\begin{description}[leftmargin=2cm]
	%%FR1
  	\item[\fr{1}]  Data emitters shall be able to push correctly structured data 	to the system.
	\begin{description}
		 \item[\fr{1.1}] The system shall provide an API for data input.

		  \item[\fr{1.2}] The data input API shall require an identifier for
 		 the system being monitored.

 		 \item[\fr{1.3}] The data input API shall require data to be
 		 timestamped.

 		 \item[\fr{1.4}] The data input API shall allow data emitters
 		 to send the IDs of sensors and their values to the HUMS, which will 		then be made available to the analysis engine.

 		 \item[\fr{1.5}] A data emitter, designed to extract data from the given 		test application shall be provided.
	\end{description}
	%%FR2
	\item[\fr{2}]  The system shall allocate a timestamp to new data.
		\begin{description}
	 		 \item[\fr{2.1}]Data input clients shall timestamp data before
 			 sending it to the system.
 			 \item[\fr{2.2}] Timestamps shall be collected when data is sent 			to storage.
		 \end{description}
	%%FR3
	 \item[\fr{3}] The system shall store correctly structured data.
	 	\begin{description}
	 		\item[\fr{3.1}] The system shall access and modify data 				through a database accessor so that the database used can 			easily be changed according to need.
	  \end{description}

 \item[\fr{4.1}] The solution shall store per-system configuration in
 a file.

 \item[\fr{4.2}] The system shall allow authorised users to modify
 configuration. 
\end{description}

\fr{3.1} refines \fr{3} by specifying how the data is to be stored and
later accessed in a way which allows the system to cope with different
demands. Allowing the database to be changed without needing to
rewrite the rest of the system means that the system could just as
easily run in a very space-constrained environment, or with highly
structured data, as in a space-abundant environment, or with
loosely-structured data.

\fr{4.1} and \fr{4.2} allow the functionality in \fr{4}, \fr{6},
\fr{8}, \fr{9}, and \fr{10} to be implemented, by specifying how these
settings are to be defined and stored.

\subsubsection{Analysing Data}
\label{sec:requirements-functional-analysing}

\begin{description}
 \item[\fr{11.1}] The system shall provide a data analysis API.

 \item[\fr{11.2}] The system shall provide a simple analysis engine
 in the form of a rules engine.

 \item[\fr{11.3}] The data input API shall notify the analysis
 system when new data is received.

 \item[\fr{11.4}] The database accessor shall allow the analysis
 system to request the last several records.

 \item[\fr{11.5}] The database accessor shall allow the analysis
 system to request records between two timestamps.

 \item[\fr{12.1}] The system shall allow the user to define their
 own events.

 \item[\fr{12.2}] The system shall allow the user to define when any
 particular event is triggered.
\end{description}

\fr{11.2} is essentially the content of the low-fidelity prototype of
the admin centre that we provided to the customer, and refines \fr{11}
by providing a simple way for customers to detect events. For
nontrivial analysis, however, the customer requires the ability to use
their own analysis engines, and it is for this that \fr{11.1}
provides. Naturally, \fr{11.2} would be implemented on top of
this. \fr{11.3} allows analysis to happen on demand, without a need
for the analysis engine to needlessly poll the database asking for new
data, and \fr{11.4} and \fr{11.5} constrain the database accessor by
specifying how the analysis engine can retrieve data from it.

\fr{12.1} and \fr{12.2} refine \fr{12} by specifying that the user can
control events down to the level of creating their own, and having
total control over where events are triggered.

\subsubsection{Reporting Data}
\label{sec:requirements-functional-feedback}

\begin{description}
 \item[\fr{20}] The system shall allow analysis results to be sent
 to the data input API.

 \item[\fr{21}] The system shall allow for reports to change the way
 in which data is sensed.

 \item[\fr{22}] The system shall allow notifications to be sent back
 to the system being monitored.

 \item[\fr{23}] The admin centre of the system shall allow users to
 specify how notifications are handled. 
\end{description}

These requirements do not appear in the prior report at all, and were
discovered to be necessary following feedback from the customer
regarding the ability of the system to feed back the results of
analysis into itself. It was felt that our architecture did not make
it clear whether this was possible or not, and so we produced these
requirements, in consultation with the customer, to ensure clarity and
to remove any potential misunderstandings.

\section{Requirements Refinement}
\label{sec:requirements}
After feedback from the initial report the original requirements have been altered and, where possible, refined as detailed below.

\subsection{Functional Requirements}
\label{sec:requirements-functional}
Below are the refinements to the existing functional requirements, based on customer feedback and the design designs made in the previous report.

\frit{1} is refined to specify how data emitters will send data to the system, and the type of data required. When creating a data emitter for the test application, we found this to be a flexible and easy-to-use architecture for gathering data. 
\frit{2} required data to be timestamped, but didn't specify how these timestamps were to be produced, \frit{2.1} and \frit{2.2} assign this
responsibility to the data emitter, and mandate when timestamps
should reflect.

\frit{3} is refined by specifying how the data is to be stored, allowing the end user to choose the technology of their choice, allowing the database to be changed without needing to alter other HUMs modules means that the system could just easily move across domains.

\frit{4} was modified such that the previous requirements \frit{4}, \frit{6}, \frit{9}, and \frit{10} can all be expressed as refinements, With the configuration file containing all end user settings. The new \frit{5} and \frit{6} enforce that the  functionality that the system must provide as a result of the data in the configuration file.

\frit{7}, previously \frit{12}, is refined to define how data will be analysed for events. It is identified that there must be an API allowing analysis engines, either created by the consumer or included with the HUMS, to extract received data and produce events. 

\begin{description}[leftmargin=1.3cm, itemsep=0.3cm]
	%%FR1
  	\item[\fr{1}]  Data emitters shall be able to push correctly structured data 	to the HUMS.
	\begin{description}
		 \item[\fr{1.1}] The HUMS shall provide an API for data input.

		  \item[\fr{1.2}] The data input API shall require an identifier for
 		 the HUMS being monitored.

 		 \item[\fr{1.3}] The data input API shall require data to be
 		 timestamped.

 		 \item[\fr{1.4}] The data input API shall allow data emitters
 		 to send the IDs of sensors and their values to the HUMS, which will 		then be made available to the analysis engine.

 		 \item[\fr{1.5}] A data emitter, designed to extract data from the given 		test application shall be provided.
	\end{description}
	%%FR2
	\item[\fr{2}]  The HUMS shall allocate a timestamp to new data.
	\begin{description}
	 	 \item[\fr{2.1}]Data input clients shall timestamp data before
 		sending it to the HUMS.
		
 		 \item[\fr{2.2}] Timestamps shall be collected when data is sent 			to storage.
	\end{description}
	%%FR3
	 \item[\fr{3}] The HUMS shall store correctly structured data.
	 \begin{description}
	 	\item[\fr{3.1}] The end user shall integrate their chosen database 		technology with the HUMS
	 	\item[\fr{3.2}] The HUMS shall use a database abstraction layer, 		allowing the database component to be easily changed according to 		need.
	  \end{description}
	%%FR4
	 \item[\fr{4}] The HUMS shall an store end user system configuration 	file.
	 \begin{description}
	  	\item[\fr{4.1}] The HUMS shall allow authorised users to modify
 		configuration files. 
		 \item[\fr{4.2}] The HUMS shall allow the consumer to define a 			low storage threshold.
		  \item[\fr{4.3}] The HUMS shall allow the consumer to set an expiry 		time on data.
		  \item[\fr{4.4}]  The HUMS shall allow the user to define that, 			upon reaching their defined data storage quota, new data is no 			longer added.
		 \item[\fr{4.5}] The HUMS shall allow the user to de- fine that, upon 		reaching their defined data storage limit, old data is deleted to make 		room for new data.
	\end{description}
	%%FR5
	 \item[\fr{5}] The HUMS shall send a notification when the consumers 	defined low storage threshold is reached.
	  \item[\fr{6}] The HUMS must store no more data records than the 		consumers defined storage quota.
	\item[\fr{7}]Events shall be triggered in response to new data that 		matches a pattern that the consumer has specified.
	  \begin{description}
	  
		 \item[\fr{7.1}]  The HUMS shall allow the consumer to specify what 		 patterns of data will produce events.
		  
		 \item[\fr{7.2}] The HUMS shall allow the user to define their
 		own events.
		
 		\item[\fr{7.3}] The HUMS shall provide an analysis API, allowing 			analysis engines to extract and analyse data.
		
		\item[\fr{7.4}] Events shall be created by analysis engines.

 		\item[\fr{7.5}] The HUMS shall provide a simple analysis engine
 		in the form of a rules engine.
	\end{description}
\end{description}

\subsubsection{Reporting Data}
\label{sec:requirements-functional-feedback}

\begin{description}
 \item[\fr{20}] The system shall allow analysis results to be sent
 to the data input API.

 \item[\fr{21}] The system shall allow for reports to change the way
 in which data is sensed.

 \item[\fr{22}] The system shall allow notifications to be sent back
 to the system being monitored.

 \item[\fr{23}] The admin centre of the system shall allow users to
 specify how notifications are handled. 
\end{description}

These requirements do not appear in the prior report at all, and were
discovered to be necessary following feedback from the customer
regarding the ability of the system to feed back the results of
analysis into itself. It was felt that our architecture did not make
it clear whether this was possible or not, and so we produced these
requirements, in consultation with the customer, to ensure clarity and
to remove any potential misunderstandings.

\section{Requirements Refinement}
\label{sec:requirements}
After feedback from the Initial Report, previously identified requirements have been updated and refined.

\subsection{Functional Requirements}
\label{sec:requirements-functional}
Below, existing functional requirements have been refined, based on Customer 
feedback and design decisions made since the previous report.

\frit{1} has been refined to specify how Data Emitters will send data to the System 
and the type of data required. Previously,
\frit{2} required data to be timestamped, but didn't specify how these 
timestamps were to be produced. \frit{2.1} and \frit{2.2} assign this
responsibility to the Data Emitter and Consumer System, mandating when 
timestamps should be created.

\frit{3} has been refined by specifying how the data is to be stored, allowing the End 
User to choose the technology of their choice. This means that the database can be 
changed without needing to alter other modules, making it easy to 
port the HUMS to other domains.
\frit{4} has been modified such that the previous requirements, \frit{4}, \frit{6}, 
\frit{9}, and \frit{10}, can all be expressed as refinements, with 
configuration files containing all Consumer System settings. The new \frit{5} and \frit{6} 
enforce the functionality the HUMS must provide as a result of configuration.

\frit{7}, previously \frit{12}, has been refined to define how data will be Analysed for 
Events. It specifies that there must be an API allowing Analysis engines, 
either created by the Consumer or included with the HUMS, to extract stored data
and produce Events. 

\frit{9} to \frit{12} do not appear in the previous report, and were determined 
to be necessary following feedback from the Customer regarding the ability 
of the system to allow for explicit feedback: the output of Analysis must be able to feedback to the Consumer System. 
It was felt that our architecture did not make it clear whether this was 
possible. These requirements were therefore added as clarification.

\begin{description}
	%%FR1
  	\item[\fr{1}]  Data Emitters shall be able to push correctly structured 
data to the HUMS.
	\begin{description}[leftmargin=1.3cm]
		 \item[\fr{1.1}] The HUMS shall provide an API for data input (the Input Interface).
		\begin{description}
			  \item[\fr{1.1.1}] The Input Interface shall require a System ID	
			that uniquely identifies the Consumer System.
 			 \item[\fr{1.1.2}] The Input Interface shall require input data to be
 		 	timestamped.
 			 \item[\fr{1.1.3}] The Input Interface shall allow Data Emitters
 		 	to send Sensor IDs and their values to the HUMS, 		
			to be made available to an Analysis engine.
		\end{description}
 		 \item[\fr{1.2}] A Data Emitter for extracting data from the given 	
	test application shall be provided.
	\end{description}
	%%FR2
	\item[\fr{2}]  The HUMS shall allocate a timestamp to new data.
	\begin{description}
	 	 \item[\fr{2.1}] Clients of the Input Interface shall timestamp data before
 		sending it to the HUMS.
 		 \item[\fr{2.2}] Timestamps shall be stored alongside the input data.
	\end{description}
	%%FR3
	 \item[\fr{3}] The HUMS shall store correctly structured data.
	 \begin{description}
	 	\item[\fr{3.1}] The HUMS shall use a database abstraction layer, 
			allowing the database to be easily changed to meet requirements of the
			Consumer System.
	  \end{description}
	%%FR4
	 \item[\fr{4}] The HUMS shall store End User configuration files.
	 \begin{description}
	  	\item[\fr{4.1}] The HUMS shall allow authorised Users to modify
 		configuration files. 
		 \item[\fr{4.2}] The HUMS shall allow the User to define a 	
			\hl{low storage threshold}.
		  \item[\fr{4.3}] The HUMS shall allow the User to set an 
			expiry time on stored data.
		  \item[\fr{4.4}] The HUMS shall allow the User to define that, 
			upon reaching their defined data storage quota, new data is 
			no longer stored.
		 \item[\fr{4.5}] The HUMS shall allow the User to define that, 
			upon reaching their defined data storage limit, old data is 
			removed to make room for the new data.
	\end{description}
	%%FR5
	 \item[\fr{5}] The HUMS shall dispatch a Notification when the Consumer's 
		\hl{low storage threshold} is reached.
	  \item[\fr{6}] The HUMS must store no more data records than the 	
		Consumer-defined storage quota.
	\item[\fr{7}] Events shall be triggered in response to data matching Analysis 
	rules specified by a User.
		  \begin{description}
			 \item[\fr{7.1}]  The HUMS shall allow the User to specify 	
			which Analysis rules will produce Events.
			 \item[\fr{7.2}] The HUMS shall allow the User to define their
 			own Events.
 			\item[\fr{7.3}] The HUMS shall provide an API, 			
			allowing Analysis engines to fetch stored data.
			\item[\fr{7.4}] Events shall be identified by Analysis engines.
 			\item[\fr{7.5}] The HUMS shall provide a simple Analysis 	
			engine in the form of a rules engine.
	\end{description}
	
	\item[\fr{8}] After dispatching a Notification for an Event of a particular 
		type, no more Notifications for an Event of that type will be 	
		sent during a User-specified cool down period.
			\item[\fr{8.1}] The HUMS shall allow the User to specify a cool down
				period for particular Events.
	\item[\fr{9}] The HUMS shall identify an Event when a specified Analysis 
		rule is matched.
	\item[\fr{10}] The HUMS must interface with Report engines, allowing 
		them to pull Reports.
	\item[\fr{11}] The System shall allow for Notifications to be fed back to the
		Consumer System to change the way in which data is sensed.
\end{description}

\subsection{Non-Functional Requirements}
Non-functional requirements remain similar, however \nfrit{14} has been 
added in order to clarify that data can be sent and stored in any format, 
enforcing that the consumer's system will not have to conform to a format
dictated by the HUMS. \nfrit{6} has been refined to more concretely detail the
testing strategies to be used when validating that requirements have been met.
It is also recognised that \nfrit{5} and \nfrit{11} are requirements 
specific to the prototype as the functional requirements mandate that the 
datastore be changeable, meaning, in the general case, requirements 
about the abilities of the datastore are not verifiable.
\begin{description}
	\item[\nfr{1}] The HUMS shall receive hardware changes without loss 
	of previously stored data.
	\item[\nfr{2}]  Users shall be provided with documentation detailing 
	how 	to use the HUMS.
	\item[\nfr{3}] The HUMS must be accessible to end users in multiple 	
	geographic locations.
	\item[\nfr{4}]  The HUMS shall only accept data from an input client 	
	providing valid credentials. 
	\item[\nfr{5}] The HUMS shall store data according to the relevant 	
	industry security standards. 
	\item[\nfr{6}]  The HUMS shall be tested to ensure all requirements are 
	met before deployment.
	\begin{description}
	\item[\nfr{6.1}]  The HUMS shall be tested using unit testing.
	\item[\nfr{6.2}]  The HUMS shall be tested using integration testing.
	\item[\nfr{6.3}]  The HUMS shall be tested using system testing.
	\item[\nfr{6.4}]  The HUMS shall be tested using inspection.
	\item[\nfr{6.5}]  The HUMS shall be tested using acceptance testing.
	\end{description}
	\item[\nfr{7}] The customer will complete acceptance testing before the 
	system is deployed.
	\item[\nfr{8}] The system must be able to support at least 5 output 
	clients per HUMS instance. 
	\item[\nfr{9}] The system must be available for no less than 99.9\% of 
	each month.
	\item[\nfr{10}]  Data must be backed up within 24 hours of having been 
	made available to the system.
	 \item[\nfr{11}] Timestamps applied by the system must be accurate to 
	within 5ms of UTC.
	\item[\nfr{12}]  The system shall dispatch notifications within 5ms of an 
	event being triggered.
	\item[\nfr{13}] The system shall support storing data without requiring 
	specific schemata.
\end{description}

\subsection{Constraint Requirements}
The constraint requirements have been modified to include other external dependencies identified due to the design decisions made throughout the previous phase of the project, including dependancies on technology choices. Previous constraints restricting the schema of data stored in the HUMS have been removed, as feedback suggested that this should not be the responsibility of the consumer.
\begin{description}
	\item[\conreq{1}]  The system will be presented with valid credentials 	by the consumers data emitters.
	\item[\conreq{2}]  Valid output clients for the system will be specified 		by the consumer.	
	\item[\conreq{3}]  The hardware that the system runs on will be 			supported by the JVM.
	\item[\conreq{4}]  The system will have access to the network to which 	the data sources are connected.
	\item[\conreq{5}]  The customer will provide two test applications 		across the course of the project.
	\item[\conreq{6}]  The customer will receive an interim report detailing 	project progress no later 14/02/2014.
	\item[\conreq{7}] The customer will receive a final report detailing the 	proposed system no later than 28/05/2014. 
	\item[\conreq{8}]  The customer will be presented with a system 		prototype on 30/05/2014.
	\item[\conreq{9}] The development team will be comprised of seven 		software engineers.
\end{description}


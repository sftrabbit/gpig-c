\documentclass[10pt,a4paper]{article}

\usepackage[margin=1in]{geometry}
\usepackage[UKenglish]{babel}
\usepackage{enumitem}
\usepackage{calc}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{multirow}
\usepackage[table]{xcolor}
\usepackage{float}
\usepackage{longtable}
\usepackage{parskip}
\usepackage{soul}
\usepackage{ifthen}
\usepackage[compact]{titlesec}
\usepackage[justification=centering]{caption}


\definecolor{reqColor}{RGB}{80,80,120}

%%Tables
\newcommand{\tableformat}[4]{
\begin{table}[H]
\centering
  \rowcolors{2}{gray!10} {white}
\begin{tabular}{#1}
  \hline
  \rowcolor[gray]{0.9} #2
\end{tabular}
\caption{#3}
\label{#4}
\end{table}}

\pagestyle{fancy}
\lhead{T Davies, A Fahie, A Fairbairn, A Free, J Mansfield, R Tucker, M 
Walker}
\chead{}
\rhead{GPIG-C}
\cfoot{\vspace{-0.6cm} \thepage}

\setlist{nolistsep} % Reduces lots of white space around lists

\renewcommand{\headrulewidth}{0.4pt} % Add rules below header
\renewcommand*{\thefootnote}{\fnsymbol{footnote}}

\newcommand{\conreq}[1]{\textcolor{reqColor}{\textbf{CR.#1}}}
\newcommand{\fr}[1]{\textcolor{reqColor}{\textbf{FR.#1}}}
\newcommand{\ed}[1]{\textcolor{reqColor}{\textbf{ED.#1}}}
\newcommand{\nfr}[1]{\textcolor{reqColor}{\textbf{NFR.#1}}}
\newcommand{\qas}[1]{\textcolor{reqColor}{\textbf{QAS.#1}}}
		
		


%%Scenarios
\newenvironment{scenario}[1]{
\newcommand{\source}[1]{\item[Source of Stimulus:] ##1}
\newcommand{\stimulus}[1]{\item[Stimulus:] ##1}
\newcommand{\artifact}[1]{\item[Artifact:] ##1}
\newcommand{\environment}[1]{\item[Environment:] ##1}
\newcommand{\response}[1]{\item[Response:] ##1}
\newcommand{\measure}[1]{\item[Response Measure:] ##1}
\newcommand{\rationale}[1]{\item[Scenario Rationale:] ##1}
\newcommand{\quality}[1]{\item[Quality:] ##1}
		\begin{description} [noitemsep]	
		\item[Scenario ID:] \qas{#1}
		}{\end{description} \vspace*{0.3cm}
		}

%%Requirements
\newenvironment{requirements}{
\newcommand{\requirement}[3]{\item[\fr{##1}] ##2
							\ifx&##3&
							%nothing
							\else
								\begin{description}
									##3
								\end{description}							
							\fi
							}
		\begin{description}[noitemsep, leftmargin=1.3cm]	
		}{\end{description} \vspace*{0.3cm}
		}
		
\begin{document}
\begin{center}
{\vspace*{-0.5cm}
\Huge GPIG-C Final Report}
\vspace*{0.2cm}

Word count: \input{wc} (\textit{using TeXCount})
\vspace*{0.1cm}

Wednesday, 21st May 2014
\end{center}
\vspace*{0.4cm}
\hrule
\vspace*{0.4cm}

%-------------------------------------------------------------%
%----------------------INTRODUCTION -------------------%
%-------------------------------------------------------------%
\section{Introduction}
\label{sec:intro}
This report details the design and development of a HUMS, concentrating on progress and changes made since the interim report. In this document the systems requirements are further refined, building on the feedback from the previous report, including a set of external dependancies. The systems architecture is then considered, in order to determine how the system will meet its requirements and what design decisions must be made, this including examining the quality attributes associated with the system, and the related scenarios, as well as tactics and patterns which can be used to achieve these qualities. The desired HUMS architecture is then presented, using a number of system views deemed to be important. Having determined the architecture of the system the risks associated with this design, and the project as a whole are discussed, and the risk reduction tactics used to mitigate them are discussed.

The development of the prototype HUMS, demonstrating some of the important features in the design, is then described, followed by a set of evaluations used to determine the achieved quality and functionality of the system. The project is then concluded, and the team reflects on their decisions throughout the project.

%-------------------------------------------------------------%
%--------------------------GLOSSARY ---------------------%
%-------------------------------------------------------------%
\section{Glossary}
\label{sec:glossary}

\begin{description}%[leftmargin=!,labelwidth=\widthof{\bfseries Data output clientxx},noitemsep]
	\item[The HUMS/System] The health and usage monitoring system being developed
	\item[(HUMS) Instance] A particular deployment of the System
	\vspace{0.15cm}
	\item[Customer] Thales, the organisation that has commissioned the System
	\item[Consumer] An organisation that makes use of the System
	\item[Consumer System] The system that a Consumer wishes to monitor
	\item[(End) User] An individual that uses the System within a Consumer organisation
	\vspace{0.15cm}
	\item[Client] Computer hardware or software that interfaces with an Instance
	\item[Input Interface] The interface through which data is supplied to an Instance
	\item[Data Emitter] A Client that provides data to an Instance through the Input Interface
	\item[Output Interface] The interfaces through which reports and notifications are dispatched
	\item[Data Output Client] A Client that receives data from an Instance through Output Interfaces
	\vspace{0.15cm}
	\item[Event] A trend in data identified by analysis
	\item[Notification] A message dispatched by the System when an Event is fired
	\item[Report] A message produced by the System by request of a User
	\vspace{0.14cm}
	\item[Sensor] A source of data to be monitored by the System
	\item[Sensor ID] A unique identifier denoting a particular Sensor
	\item[System ID] A unique identifier denoting a group of Sensors
\end{description}

%-------------------------------------------------------------%
%-------------------REQUIREMENTS----------------------%
%-------------------------------------------------------------%
\section{Requirements Refinement}
\label{sec:requirements}
After feedback from the initial and interim reports, the HUMS requirements have been updated. This included modifying existing requirements and adding additional requirements and refinements. It also included removing the constraint requirement, which were deemed unnecessary by the module leader, and instead identifying the external dependancies of the system.

\subsection{Functional Requirements}
\label{sec:functional_requirements}
\hl{write about changes -- currently they are unchanged} 

\begin{requirements}
\requirement{1}{Data Emitters shall be able to push correctly structured data to the HUMS.}{
	\requirement{1.1}{The HUMS shall provide an API for data input (the Input Interface).}{
		\requirement{1.1.1}{The Input Interface shall require a System ID that uniquely identifies the Consumer System.}{}
		\requirement{1.1.2}{The Input Interface shall require input data to be timestamped.}{}
		\requirement{1.1.3}{The Input Interface shall allow Data Emitters to send Sensor IDs and their values to the HUMS, to be made available to an analysis engine.}{}
	}
	\requirement{1.2}{A Data Emitter for extracting data from the given test application shall be provided.}{}
}
\requirement{2}{The HUMS shall allocate a timestamp to new data.}{
	\requirement{2.1}{Data shall be timestamped before it reaches the HUMS Input Interface.}{}
	\requirement{2.2}{Timestamps shall be stored alongside the input data.}{}
}
\requirement{3}{The HUMS shall store correctly structured data.}{
	\requirement{3.1}{The HUMS shall use a database abstraction layer, allowing the Consumer to select their datastore technology.}{}
}
\requirement{4}{The HUMS shall store End User configuration files.}{
	\requirement{4.1}{The HUMS shall allow authorised Users to modify configuration files.}{}
	\requirement{4.2}{The HUMS shall allow the User to define a storage limit.}{}
	\requirement{4.3}{The HUMS shall allow the User to set an expiry time on stored data.}{}
	\requirement{4.4}{The HUMS shall allow the User to define that, upon reaching their defined data storage quota, new data is no longer stored.}{}
	\requirement{4.5}{The HUMS shall allow the User to define that, upon reaching their defined data storage limit, old data is removed to make room for the new data.}{}
}
\requirement{5}{The HUMS shall dispatch a Notification when the Consumer's storage limit is reached.}{}
\requirement{6}{The HUMS must store no more data records than the Consumer-defined storage quota.}{}
\requirement{7}{Events shall be triggered in response to data matching analysis rules specified by a User.}{
	\requirement{7.1}{The HUMS shall allow the User to specify which analysis rules will produce Events.}{}
	\requirement{7.2}{The HUMS shall allow the User to define their own Events.}{}
	\requirement{7.3}{The HUMS shall provide an API, allowing analysis engines to fetch stored data.}{}
	\requirement{7.4}{Events shall be identified by analysis engines.}{}
	\requirement{7.5}{The HUMS shall provide a simple analysis engine in the form of a rules engine.}{}
}
\requirement{8}{After dispatching a Notification for an Event of a particular type, no more Notifications for an Event of that type will be sent during a User-specified cool down period.}{
	\requirement{8.1}{The HUMS shall allow the User to specify a cool down period for particular Events.}{}
}
\requirement{9}{The HUMS shall identify an Event when a specified analysis rule is matched.}{}
\requirement{10}{The HUMS must interface with Report engines, allowing them to pull Reports.}{}
\requirement{11}{The System shall allow for Notifications to be fed back to the Consumer System to change
the way in which data is sensed.}{}
\end{requirements}

\subsection{Non Functional Requirements}
\label{sec:nonfunctional_requirements}
\hl{write about changes -- currently they are unchanged} 

\begin{requirements}
\requirement{1}{The HUMS shall undergo hardware modifications without loss of previously stored data.}{}
\requirement{2}{Users shall be provided with documentation detailing how to use the HUMS.}{}
\requirement{3}{The HUMS must be accessible to End Users regardless of their geographic location.}{}
\requirement{4}{The HUMS shall only accept data from a Client of the Input Interface providing valid credentials.}{}
\requirement{5}{The HUMS shall allow data to be stored according to the relevant industry security standards.}{}
\requirement{6}{The HUMS shall be tested to ensure all requirements are met before deployment.}{
	\requirement{6.1}{The HUMS shall be tested using unit testing.}{}
	\requirement{6.2}{The HUMS shall be tested using integration testing.}{}
	\requirement{6.3}{The HUMS shall be tested using system testing.}{}
	\requirement{6.4}{The HUMS shall be tested using inspection.}{}
	\requirement{6.5}{The HUMS shall be tested using acceptance testing.}{}
}
\requirement{7}{The Customer will complete acceptance testing before the System is deployed.}{}
\requirement{8}{The System must be able to support at least 5 Clients of the Output Interface per HUMS Instance.}{}
\requirement{9}{The System must be available for no less than 99.9\% of each month.}{}
\requirement{10}{Data must be backed up within 24 hours of having been made available to the System.}{}
\requirement{11}{Timestamps applied by the system must be accurate to within 5 ms of UTC.}{}
\requirement{12}{The System shall dispatch Notifications within 5 ms of an Event being triggered.}{}
\requirement{13}{The System shall support storing data without requiring specific schemata.}{}
\end{requirements}

\subsection{External Dependancies}
 \label{sec:external_dependancies}
\hl{todo --- write an intro to these, 4 dependancies is probably enough}

 \begin{description}
 \item[\ed{1}] \hl{todo}
 \item[\ed{2}] \hl{todo}
 \item[\ed{3}] \hl{todo}
 \item[\ed{4}] \hl{todo}
 \end{description}


%-------------------------------------------------------------%
%-----------------------QUALITIES-------------------------%
%-------------------------------------------------------------%
\section{Quality Attributes}
\label{sec:qualities}
A number of quality attributes must be considered when creating the HUMS architecture in order to ensure that architectural decisions not only provide the desired functionality but produce a system meeting the needs of all stakeholders.
Defining these attributes explicitly allows tactics and patterns to be adopted at an early stage, allowing the system to achieve the desired utilities of each quality. 
When considering the HUMS, its requirements, and its stakeholders, table \ref{tab:qualities} ranks the qualities associated with the system, and explains why the quality was given that particular ranking. The ranking of qualities, was not done in the previous report, however,  is important as optimising the utility of one attribute may result in the utility of another being reduced. Achieving the right balance is therefore very important, and the utility of lower ranked qualities may need to be sacrificed in order to obtain the required utility of highly ranked qualities. Tailorability is important to the Customer, and has been decomposed into a number of sub qualities: Modifiability, Flexibility, and Interoperability.

\tableformat{p{2.4cm} p{1.2cm} p{11.2cm}}{
\hline
Quality \qquad Attribute & Rank & Reasoning \\
\hline
Flexibility & High &  It is important that the HUMS can be used in a range of domains, this has been strongly emphasised by the customer. 
\\
Modifiability & High & The HUMS will initially be built to tackle a single domain (software applications), however, in the future it will be used in domains such as embedded, electrical, and mechanical systems. A system which is not modifiable will be timely and costly to extend. In addition, both users and developers need to be able to add custom engines to the HUMS
\\
Interoperability & High & Interoperability is very important to the HUMS as its main purpose is to interface and exchange data with external systems. 
\\
Availability & High &  The non functional system requirements identified high availability targets for the system. In addition, the HUMS is designed to be used to monitor the health of other systems, if it was not highly available then End Users would lose confidence in it. The HUMS must be at least as available as the average End Users system in order to monitor it properly. 
 \\
Security & High & Security is highly ranked as data being monitored must be kept both confidential and safe. It must be impossible for an unauthorised user to view or modify system data, and data in transit between Data Emitters and the HUMS must be protected.
\\
Performance & Medium & The HUMS is required to receive data from Sensors, and produce Notification events in response to that data with a latency no greater than 5ms. It must also  interface with many Data Emitters and Data Output Clients, meaning it must capable of handling a large number of events quickly. 
\\
Testability & Medium & The TDD development approach, discussed in the initial report and followed throughout the project, makes testability of medium importance to the system. Having a high testability utility will help to reduce system faults, and is also likely to increase its availability. 
\\
Usability & Low & Usability was not deemed of great importance to the system, as its sub qualities, such as helpfulness and learnability, have little scope to be optimised in the HUMS. Usability does need to be considered for the web interface and admin centre, however, this is only a small part of the HUMS.
\\
}{The ranked quality attributes, associated with the HUMS}{tab:qualities}

%-------------------------------------------------------------%
%----------------------SCENARIOS---------------------%
%-------------------------------------------------------------%
\section{Quality Attribute Scenarios}
\label{sec:scenarios}
Having identified the quality attributes which are important to creating a successful system, a set of quality attribute scenarios can be created which show how the system should respond to certain stimulus. This helps to create goals, which the final implementation can be tested against to determine its quality, and how effective it is at achieving its non functional requirements. The selection of scenarios presented below are included as they appear particularly interesting and describe how the system should behave both normally and in extreme conditions, other scenarios where also considered and documented, however, could not be included in this report due to space limitations.

\begin{scenario}{1}
\quality{Flexibility}
\source{The Customer}
\stimulus{The Customer wishes to reconfigure the system to monitor mechanical systems.}
\artifact{HUMS Core}
\environment{Design Time}
\response{The System is reconfigured to be comparable with mechanical systems, tested, and deployed.}
\measure{All work is completed on time and in budget.}
\rationale{This scenario is important to the customer, as they expect the HUMS to move across domains easily.}
\end{scenario}

\begin{scenario}{2}
\quality{Modifiability}
\source{Developer}
\stimulus{Wishes to add an additional analysis, reporting, or notification engine to the HUMS.}
\artifact{HUMS Core}
\environment{Runtime}
\response{The new engine is implemented, tested and successfully added to the HUMS, without any loss in service.}
\measure{No other system elements are affected, and the work is completed within budget.}
\rationale{This scenario is important to both the HUMS developers and the End Users, the HUMS should allow both of these groups to add custom engines to the HUMS system, without affecting other system components.}
\end{scenario}

\begin{scenario}{3}
\quality{Security}
\source{An unknown external Client}
\stimulus{Attempts to access stored HUMS data or HUMS services.}
\artifact{HUMS Core}
\environment{Normal Operation - Online}
\response{The Client is authenticated, and allowed to access system services, or is not recognised and blocked from accessing system data and services.}
\measure{No HUMS data or services are damaged as a result of the access attempt.}
\rationale{This scenario shows how the HUMS is expected to behave when a Client attempts access to its services, showing the importance of authenticating Clients and how to HUMS should respond to unauthorised Clients.}
\end{scenario}

\begin{scenario}{4}
\quality{Availability}
\source{Datastore Module}
\stimulus{The End Users registered datastore is unavailable to the HUMS instance}
\artifact{HUMS System}
\environment{Runtime}
\response{A Notification is sent to the administrator of the HUMS instance, and the HUMS periodically attempts to reconnect to the Datastore.}
\measure{End user defined repair time.}
\rationale{This scenario shows how the HUMS should respond to a datastore failure, clearly drawing a line between the responsibilities of the HUMS and of the End User. If the End Users defined datastore fails the HUMS can only alert the user and attempt to reconnect, this is a critical fault and does not allow the system to be run in degraded mode.}
\end{scenario}

%-------------------------------------------------------------%
%--------------------------RISKS--------------------------%
%-------------------------------------------------------------%
\section{Project Risks}
\label{sec:risks}
It is important to consider the risks of any software project, so that appropriate mitigation can be exercised, so that there are clear contingency plans in place to prevent problems having a large impact of the project, ensuring all work is completed on time and to a high standard. For this phase of the project, risks have been formulated and mitigated before beginning development, unlike in previous phases where risks have been updated ad-hoc. This was done to ensure that the risks were explicitly known, and mitigated, throughout development. 

Unlike in previous reports, risks have been separated into human risks and technological risks, this distinction was not previously made and resulted in technical risks not being thoroughly considered throughout the project. Human risks are shown in table \ref{tab:human_risks} and technical risks are presented in table \ref{tab:tech_risks}.
Some risks have been modified since the previous report, others are completely new and specific to the new system architecture. The risks have each been assigned a risk level corresponding to the product of their likelihood and impact, as described by \cite{risks}, where likelihood is measured between 1$-$100.

\tableformat{p{0.8cm} p{3cm} p{3cm} p{3cm} c c c }
{ 	\hline
  	Risk ID & Risk Description & Impact Description & Contingency & Prob.(\%) & Impact & Score \\
  	\hline
  
 	R.1 & Loss of team member(s) or team member(s) underperformance & Internal/External deadline failure. Poor standard of work. & Reallocate work across remaining team members and notify module leader. & 10 & Moderate & \textbf{Low} \\
   	R.2 & External pressures (such as other modules) limit the amount of development time & Internal/External deadline failure. Lack of technical achievement. & Modify the project plan to reduce the prototype functionality, request extension. & 25 & Moderate &  \textbf{Low} \\
   	R.3 & Customer does not think that the HUMS design correctly fulfils their brief & Wasted time. Failure to meet deadlines. Limited prototype implementation. & Modify the system and communicate with the customer to ensure the HUMS design is as they expect. & 15 & Serious &  \textbf{Low} \\
	R.4 & Work is lost due to human or hardware error & Wasted time. Failure to meet deadlines. Limited prototype implementation. & Revert to a backup and continue working from there, possibly reducing system functionality. & 30 & Minor &  \textbf{Low} \\
  	\hline
}
{The human and business risks associated with this phase of the project}{tab:human_risks}


\tableformat{p{0.8cm} p{3cm} p{3cm} p{3cm} c c c}
{ 	\hline
  	Risk ID & Risk Description & Impact Description & Contingency & Prob.(\%) & Impact & Score \\
  	\hline
  
 	R.5 & Developed admin centre does not satisfy the outlined requirements & Poor user experience. Wasted time. Failure to meet requirements. & Redesign admin centre & 10 & Minor & \textbf{Low} \\
   	R.6 & Data interception between the HUMS core and registered engines or datastore & Loss of confidence in HUMS. Lost/Corrupted Data & Additional penetration testing to identify security flaws. Have an audit trail. & 5 & Serious &  \textbf{Low} \\
   	R.7 & HUMS does not facilitate data storage for a variety of systems. & Failure to meet key modifiability, interoperability, and flexibility requirements. Low quality solution. &  Test this system on a number of popular datastore implementations and make any required alterations. & 20 & Serious & \textbf{Medium} \\
   	R.8 & Included analysis engines computation too slow & Failure to meet performance targets. Loss of data due to backlog. & Re-engineer analysis system and reduce complexity. Possibly reduce the functionality of the engines & 25 & Moderate & \textbf{Low} \\	
	R.9 & Included Notification engines too slow & Failure to meet performance targets. Loss of events, End User not informed of system failure. & Re-engineer notification system, reducing complexity. Possibly change protocols and functionality to meet performance requirements. & 20 & Moderate & \textbf{Low} \\	
  	\hline
}
{The technical risks associated with this phase of the project}{tab:tech_risks}

\subsection{Risk Mitigation}
The following risk reduction techniques have been used throughout this phase of the project, including both project planning and development, in order to mitigate the identified risks. In addition to these techniques, the tactics and patterns explained later in this report are used to mitigate technical risks which affect the quality of the system.
\begin{description}
\item[Scrum:]
The use of the Scrum as part of our software engineering methodology, as discussed in the initial report, helps to mitigate risks \emph{R.1-3}. The scrum allows team members to be kept up to date on what other team members are working on, and on the state of the project as a whole, making it easier for work to be reallocated across teams members. It also helps to ensure decisions concerning the HUMS design are discussed and agreed upon, reducing the risk of straying away from the Customers brief.

\item[Version Control:]
Git version control is used, allowing the entire team to simultaneously modify the project, whilst keeping a reversible project history. This helps to mitigate the majority of the identified risks. Human risks are mitigated as the team has access to the work of other members, making it easy to take over when members are unavailable, it also prevents large amounts of work being lost due to human or hardware errors. Technical risks are mitigated as it is easy to identify and undo changes which caused a problem in the system, or caused the system to not meet stakeholder expectations.

\item[Automated Testing:] 
Automated integration, unit, and regression testing is used throughout the project using JUnit and Mockito to ensure the HUMS implementation is stable and free of major bugs. This reduces risks \emph{R.5-9}, helping to automatically validate system requirements. 
Static testing is also performed using type checkers and code profilers in order to reduce the time spent debugging.
\end{description}

%-------------------------------------------------------------%
%--------------TACTICS / PATTERNS----------------------%
%-------------------------------------------------------------%
%   Notes: 									 %
%  		- Reference risks constantly, lots and lots	 %
%-------------------------------------------------------------%
\section{Tactics and Patterns}
\label{sec:tactics}
Having identified the key quality attributes for the system, and a set of quality attribute scenarios, the tactics and patterns needed to ensure the desired utility of these attributes can be examined. In this section we focus on those qualities ranked highly in table \ref{tab:qualities}.

\subsection{Tactics}

Below the tactics which appear most suitable for use with the HUMS are summarised. Each quality attribute has different tactics, which can be used to increase its utility within the HUMS. Flexibility tactics are not included as they are covered under modifiability and interoperability, as they are complementary. The tactics used are based on the descriptions provided by \hl{ref bass}.

\begin{description}
\item[Modifiability] \hfill
	\begin{description}[noitemsep]
	\item[Defer Binding Time] Configuration files, runtime registration, and polymorphism can be used to reduce the time taken to make changes, and to allow the End User to modify the system at runtime.
	\item[Localise Modifications] Steps are to be taken to maintain semantic coherence within the implementation, with the team aiming to produce loosely coupled modules with high cohesion. Modules are to be generalised where possible, allowing them to preform a larger variety of functions without code changes.
	\item[Prevent Ripple Effect] Communication paths are to be restricted where possible, with the modules which can share data being limited. Information can also be hidden by using private functions where possible, meaning changing implementation details will not affect the public APIs used by the End User.
	\end{description}
\item[Interoperability] \hfill
	\begin{description}[noitemsep]
		\item[Locate] Services may need to be discovered at runtime.
		\item[Managing Interfaces]  Complex interactions between the HUMS core and external engines may need to be orchestrated in order to fulfil the required functionality.
	\end{description}
\item[Availability] \hfill
	\begin{description}[noitemsep]
	\item[Fault Prevention] 
	\item[Fault Detection] Exceptions can be used throughout the software to detect and handle errors. Ping/Echo could also be used to ensure external components are correctly registered with the HUMS core.
	\item[Fault Recovery] 
	\end{description}
\item[Security] \hfill
	\begin{description}[noitemsep]
	\item[Resisting Attacks] The use of prepared statements would mitigate the threat of SQL injection attacks. All connections to the datastore should require authentication and communications should be encrypted to avoid man-in-the-middle attacks. Users access to functionality should be restricted to the bare necessities. 
	\item[Detecting Attacks] Detecting attacks can take many forms. A primitive ping/echo could be used with length response times indicating heavy server load and possible DOS attack. Trap files could be set that should only ever be accessed from specific addresses.
	\item[Recovering From Attacks] Maintaining redundant copies of data or frequent data snapshots.  would allow for a  frequency would allow for the restoration of data.
	\end{description}
\end{description}

\subsection{Design Patterns}
Having determined the tactics implacable to the HUMS, which are likely to produced the desired utility of the key system quality attributes, a number of software design patterns can be selected, which allow these tactics to be realised in the HUMS architecture.

\begin{description}
\item[Pattern] blah
\end{description}

\subsection{System Views \hl{Joe and Andy}} 
\label{sec:views}
%-------------------------------------------------------------%
%-------------TECHNICAL PROGRESS-------------%
%-------------------------------------------------------------%
%   Notes: 					         	 %
%  	- Reference risks constantly, lots and lots	 %
%	- Reference requirements and scenarios 	 %
%-------------------------------------------------------------%
\section{Technical Progress}
\label{sec:techprog}

\subsection{Sense}
\label{sec:sense}

\subsubsection{Test Apps}

\subsubsection{Earthquakes}

\subsubsection{Traffic}

\subsubsection{Android App}
To explore the possibilities surrounding monitoring remote systems, an Android app was created which offers the capability to monitor the phone itself, offering an example of analysis with the HUMS resulting in feedback. The app also offers a simulation of a car monitoring sensor, where measurements such as RPM, oil temperature and so on, can be changed by the user, allowing the notification system to be easily demonstrated. Finally, the app collects face data using the built-in camera, forwarding it to the core for analysis and notification, if appropriate.

\subsection{Smartphone Monitoring}

\subsection{Simulated Car Monitoring}

\subsection{Face Recognition for Security}
The Android app collects face data, forwarding it to the Core for analysis, where notifications are generated, notionally granting or denying access to a secure system. This module shows off the ability of sensors and analysis engines to work together to perform complex tasks, which can be tailored using the Core configuration file.

The face recognition process is two fold: An image is captured and it's dimensionality is reduced by the Android app before being sent on to the Core, then the \texttt{FaceAnalysisEngine} takes this face description and analyses it to decide if the face is authorised or not.

The face description in the Android app is computed using the Local Binary Patterns Histogram (LBPH) \cite{ahonen2006face} method. Each pixel in the image is reduced to a bit-vector describing whether each of the neighbouring pixels is brighter or darker than it (although what constitutes a neighbour can be varied to control for scaling). These bit-vectors are then used to generate a histogram. All \emph{uniform bit patterns}, those which have at least two $1$s in a row and no more than two transitions between runs of $1$s and $0$s, have a separate bin and all other patterns have a single bin. This results in a compressed description of the image which attempts to preserve the information content pertaining to face description. This is the data which is then transmitted to the Core.

When the histogram data is received by the \texttt{FaceAnalysisEngine}, it is compared against the example authorised faces using the Chi-Squared distance measure, authorising the face provided the sensor if it's distance from any of the example faces provided by the configuration file is less than some threshold, also given by the configuration file.

% TODO This method is robust to lighting and pose \cite{ahonen2006face}


\subsection{Store}
\label{sec:store}
To improve the tailorability of the system and address risks \emph{R.6} and \emph{R.7}, three different datastores were supported. Two remote data sources, Google app engine and a Postgres instance hosted on Heroku or a local H2 instance. Clients can change between datastores with ease by updating their configuration file.

Both Google App Engine and Heroku are Platform as a Service solutions, they both provide a remote datastore to the HUMS system. Communication between a clients HUMS and the remote datastore takes place over HTTP. Both Heroku and App Engine provide a guaranteed uptime of $99.99\%$, as such the reliability and speed of the connection to the remote datastore will be largely influenced by a clients internet connection.

For real-time applications that require high performance and low response times a local H2 instance is offered. H2 is a Java library that implements a simple, self-contained, serverless, transactional SQL database. H2 can be run in embedded or server mode, its small storage footprint of $1.5$MB and low memory usage make it ideal for use in resource constrained environments. 

Connection pooling was used for all datastores. The process of opening, maintaining and deleting connections is resource intensive and a performance bottleneck. A connection pool provides a cache of reusable database connections, connections only need to be created once and shared between components that require data access. The HikariCP Java library was used to simplify the implementation of database connection pools. 

Prepared statements were used across all datastore. They are compiled once and then reused many times leading to significant gains in performance. Finally, prepared statements offer improved security with SQL injection attacks rendered useless with all user input being treated as data and thus not altering the characteristics of data queries.

\subsection{Analyse}
\label{sec:analyse}
vhvhv

\subsection{Report and Notify}
\label{sec:report}
vhvhvh

\subsection{Feedback}
\label{sec:feedback}

\subsection{Technologies}

%-------------------------------------------------------------%
%-----------------------PROTOTYPE-----------------------%
%-------------------------------------------------------------%
\section{Prototype Implementation Evaluation \hl{All}}
\label{sec:prototype}


\subsection{Interim Implementation Summary}
\label{sec:interim_summary}


\subsection{Changes Since the Interim Report}
\label{sec:changes}

\subsection{Evaluation on Test Application 1}
\label{sec:test_app1}


\subsection{Evaluation on Test Application 2}
\label{sec:test_app2}


\subsection{Evaluation of the HUMS SaaS}
\label{sec:hums_saas}


\subsection{Evaluation of the Earthquake Monitor}
\label{sec:earthquake}


\subsection{Evaluation of \hl{Some new thing}}
\label{sec:new_thing} %%change this


%-------------------------------------------------------------%
%---------------------COMMUNICATION-------------------%
%-------------------------------------------------------------%
\section{Customer Communication \hl{Someone.... please not me}}
\label{sec:customer_comms}

%-------------------------------------------------------------%
%----------------------CONCLUSION----------------------%
%-------------------------------------------------------------%
\section{Conclusion}
\label{sec:conclusion}


\subsection{Summary}
\label{sec:summary}


\subsection{Reflection}
\label{sec:reflection}

\bibliography{report-refs}
\bibliographystyle{IEEEtran}
\end{document}
